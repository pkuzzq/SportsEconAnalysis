<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>ä½“è‚²ç»æµåˆ†æï¼šç†è®ºä¸åº”ç”¨</title>
    <meta charset="utf-8" />
    <meta name="author" content="å‘¨æ­£å¿" />
    <meta name="date" content="2022-05-02" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# ä½“è‚²ç»æµåˆ†æï¼šç†è®ºä¸åº”ç”¨
]
.subtitle[
## é™„åŠ å®è¯ä¸“é¢˜ï¼šåŒ¹é…æ–¹æ³•
]
.author[
### å‘¨æ­£å¿
]
.date[
### 02 May 2022
]

---

class: center, middle, inverse



&lt;style type="text/css"&gt;
@media print {
  .has-continuation {
    display: block !important;
  }
}
&lt;/style&gt;

# å¼•è¨€


---
name: schedule

# å¤§çº²

## ä¸Šæ¬¡å®è¯æ–¹æ³•

- æ¡ä»¶ç‹¬ç«‹å‡è®¾: `\(\left( {Y}_{0i},\, {Y}_{1i}\right) \perp {D}_{i}\big| {X}_{i}\)`
- CEFã€LPF
- é—æ¼å˜é‡åè¯¯å…¬å¼

## ä»Šå¤©

- project proposals.
- åŒ¹é…ä¼°è®¡ (*MHE* 3.2 å’Œ C&amp;T 25.4).

---
layout: true
# åŒ¹é…æ–¹æ³•

---
class: inverse, middle
---
layout: false
name: gist
## ä¸»æ—¨

- å›å¿† .hi[æ¡ä»¶ç‹¬ç«‹å‡è®¾CIA .super[.pink[â€ ]]]ï¼š åœ¨ç»™å®š.hi[å¯è§‚æµ‹çš„æ§åˆ¶å˜é‡]æ¡ä»¶ä¸‹ï¼Œå¤„ç½®å˜é‡çš„åˆ†é…å°±åƒRCTä¸€æ ·å¥½ã€‚

.footnote[.pink[â€ ] é€šè¿‡å¢åŠ æ§åˆ¶å˜é‡çš„æ–¹å¼è§£å†³äº†é€‰æ‹©åè¯¯çš„é—®é¢˜ï¼Œä½†å½“é€‰æ‹©åè¯¯ç”±äºä¸å¯è§‚æµ‹çš„å› ç´ é€ æˆæ—¶ï¼Œå°±è¯¥æ–¹æ³•å°±å¤±å»ä½œç”¨ã€‚.hi.red[åŸºäºå¯è§‚æµ‹ç‰¹å¾çš„é€‰æ‹©ï¼ˆselection on observablesï¼‰ï¼šåªæ ¹æ®å¯è§‚æµ‹ç‰¹å¾è€Œé€‰æ‹©æ˜¯å¦æ¥å—å¤„ç½®]]

- .hi[åŒ¹é…ä¼°è®¡é‡]çš„ç›´è§‚æƒ³æ³•


- å‡è‹¥æ‰¿è®¤æ¡ä»¶ç‹¬ç«‹å‡è®¾ .mono[&lt;=&gt;] `\(\left({Y}_{1i},\, {Y}_{0i} \right)\perp {D}_{i}|{X}_{i}\)` ï¼Œ é‚£ä¹ˆå¯ä»¥è®¡ç®—å‡ºä»¥ `\({X}_{i}=x\)` ä¸ºæ¡ä»¶çš„å¤„ç½®æ•ˆåº”ï¼š
$$
`\begin{align}
  \tau(x) = {E}\left[ {Y}_{1i} - {Y}_{0i} \mid {X}_{i} = x \right]
\end{align}`
$$

- .hi.red[åŒ¹é…çš„æƒ³æ³•æ˜¯:] é€šè¿‡"æ§åˆ¶"å¯è§‚æµ‹å˜é‡ï¼ˆå‡ ä¹ç›¸åŒï¼‰ï¼Œå³å°†å¹²é¢„ç»„å’Œæ§åˆ¶ç»„çš„ä¸ªä½“æŒ‰å¯è§‚æµ‹ç‰¹å¾åŒ¹é…ï¼Œè§£å†³åŸºäºå¯è§‚æµ‹å˜é‡è‡ªé€‰æ‹©é€ æˆçš„åå·®


---
name: goals
## ç›®æ ‡

- å›åˆ°.b[å› æœæ¨æ–­çš„æ ¹æœ¬é—®é¢˜]ï¼š

1. è¦ä¼°è®¡ `\(\tau_i = {Y}_{1i} - {Y}_{0i}\)`
2. æ— æ³•åŒæ—¶è§‚å¯Ÿåˆ° `\({Y}_{1i}\)` å’Œ `\({Y}_{0i}\)`


- å¤§å¤šæ•°å®è¯"æ­¦å™¨åº“"éƒ½æŒ‡å‘ä¸ºå¹²é¢„ç»„ä¸ªä½“å»å¯»æ‰¾ `\({Y}_{0i}\)`ï¼Œå³å¹²é¢„ç»„çš„ä¸å¯è§‚å¯Ÿçš„åäº‹å®ã€‚

--

- .hi[åŒ¹é…æ–¹æ³•çš„æ€è·¯ä¸åŒ]

- å°†æ§åˆ¶ç»„å’Œå¹²é¢„ç»„çš„ä¸ªä½“ç”¨å¯è§‚æµ‹çš„ç‰¹å¾ `\({X}_{i}\)` è¿›è¡Œé…å¯¹ï¼Œä»¥ "åŒ¹é…æˆåŠŸçš„"æ§åˆ¶ç»„ä¸ªä½“çš„ç»“æœå˜é‡ä¸ºå‚ç…§ï¼Œå°†å…¶ä½œä¸ºå¹²é¢„ç»„ä¸ªä½“ç»“æœå˜é‡ `\({Y}_{1i}\)` çš„åäº‹å®ç»“æœä¼°è®¡å€¼ `\(\widehat{{Y}_{0i}}\)`ã€‚


---
## æ­£å¼çš„

- æˆ‘ä»¬æƒ³ä¸ºæ¯ä¸€ä¸ª**å¹²é¢„ç»„çš„ä¸ªä½“ï¼ˆ `\({D}_{i}=1\)` ï¼‰**æ„å»ºä¸€ä¸ªåäº‹å®


-  `\(i\)` ä¸ªä½“çš„åäº‹å®åªä½¿ç”¨ä¸å…¶å¯è§‚æµ‹ç‰¹å¾ `\({X}_{i}\)` çš„ä¸ªä½“ã€‚

- å‡è®¾å¹²é¢„ç»„æœ‰ `\(N_T\)` ä¸ªä½“ï¼Œæ§åˆ¶ç»„æœ‰ `\(N_C\)` ä¸ªä½“ï¼Œé¢„æœŸæœ‰ï¼š
  - å¹²é¢„ç»„æœ‰ `\(N_T\)` ä¸ªæƒé‡é›†ï¼Œ
  - æ§åˆ¶ç»„ `\(N_C\)` ä¸ªä½“ä¸­æœ‰ä¸ä¹‹ç›¸åŒ¹é…çš„æƒé‡
--
: `\(w_i(j)\, \left( i = 1,\,\ldots,\, N_T;\, j=1,\,\ldots,\, N_C \right)\)`

--

- å‡å®š `\(\sum_j w_i(j) = 1\)` ã€‚å¹²é¢„ç»„ `\(i\)` ä¸ªä½“çš„åäº‹å®ç»“æœä¼°è®¡ä¸ºï¼š
$$
`\begin{align}
  \widehat{{Y}_{0i}} = \sum_{j\in \left( D=0 \right)} w_i(j) {Y}_{j}
\end{align}`
$$
---
name: generic
## æ­£å¼çš„

- å¦‚æœå¯¹å¹²é¢„ç»„ä¸ªä½“ `\(i\)` çš„åäº‹å®ä¼°è®¡å€¼ä¸ºï¼š
$$
`\begin{align}
  \widehat{{Y}_{0i}} = \sum_j w_i(j) {Y}_{j}
\end{align}`
$$
- é‚£ä¹ˆæ¯ä¸€ä¸ªä¸ªä½“ `\(i\)` çš„å¤„ç½®æ•ˆåº”ä¼°è®¡å€¼ä¸ºï¼š
$$
`\begin{align}
  \hat{\tau}_i = {Y}_{1i} - \widehat{{Y}_{0i}} = {Y}_{1i} - \sum_j w_i(j) {Y}_{j}
\end{align}`
$$

--

æ‰€ä»¥å¯¹å¹²é¢„ç»„çš„å¤„ç½®æ•ˆåº”çš„**ä¸€èˆ¬åŒ–çš„åŒ¹é…çš„å¤„ç½®æ•ˆåº”**æ˜¯
$$
`\begin{align}
  \hat{\tau}_M = \dfrac{1}{N_T} \sum_{i \in \left( {D}=1 \right)} \left( {Y}_{1i} - \widehat{{Y}_{0i}} \right) = \dfrac{1}{N_T} \sum_{i \in \left( {D}=1 \right)} \left( {Y}_{1i} - \sum_{j\in \left( D=0 \right)} w_i(j) {Y}_{j} \right)
\end{align}`
$$
---
name: weights
## ä¸ºåŒ¹é…å¯¹è±¡åŠ æƒ.super[.pink[â€ ]]

- æ‰€ä»¥åŒ¹é…æ–¹æ³•çš„æ ¸å¿ƒæ˜¯å¦‚ä½•è¿›è¡ŒåŠ æƒã€‚.super[.pink[â€ â€ ]]

.footnote[
.pink[â€ ] ğŸ¤¦ .pink[â€ â€ ] é™¤æ­¤ä¹‹å¤–ï¼Œå†åŠ ä¸Šæœ‰è¶£çš„ã€æ”¿ç­–ç›¸å…³çš„ã€å…·æœ‰å¯ä¿¡çš„æ¡ä»¶ç‹¬ç«‹æ€§å‡è®¾ã€‚è¿˜æœ‰æ•°æ®ã€‚
]

--

.qa[Q] å“ªé‡Œå¯ä»¥æ‰¾åˆ°è¿™äº›æ–¹ä¾¿çš„æƒé‡ï¼Ÿ

.qa[A] ç»Ÿè®¡å­¦å®¶æä¾›äº†é€‰é¡¹ï¼Œä½†éœ€è¦è°¨æ…/è´Ÿè´£ä»»åœ°é€‰æ‹©ã€‚

- ä¾‹å¦‚ï¼Œå¦‚æœå¯¹äºæ‰€æœ‰ `\((i,j)\)` ç»„åˆèµ‹äºˆç›¸åŒæƒé‡ `\(w_i(j) = \frac{1}{N_C}\)` ï¼Œé‚£ä¹ˆç›¸å½“äºå›åˆ°äº†å‡å€¼å·®ã€‚
&lt;br&gt; è¿™æ„å‘³è¿™äº›å¯»æ‰¾çš„æƒé‡åœ¨èµ‹æƒåï¼Œä¸èƒ½ä¸æ¡ä»¶ç‹¬ç«‹å‡è®¾å†²çªã€‚


- .hi.red[è®¡åˆ’æ˜¯ï¼š] é€‰æ‹©çš„æƒé‡èƒ½å¤Ÿè¡¨æ˜å¹²é¢„ç»„ç‰¹å¾ `\({X}_{i}\)` ä¸æ§åˆ¶ç»„ç‰¹å¾ `\({X}_{j}\)` æ˜¯ .hi-slate[*å¦‚ä½•æ¥è¿‘çš„*]


---
name: discrete
## ç›¸ä¼¼æ€§Proximity

- æˆ‘ä»¬é€‰æ‹©çš„æƒé‡ `\(w_i(j)\)` åº”è¯¥æ˜¯åæ˜ å¹²é¢„ç»„ç‰¹å¾ `\({X}_{i}\)` ä¸æ§åˆ¶ç»„ç‰¹å¾ `\({X}_{j}\)` .hi-slate[*å¦‚ä½•æ¥è¿‘çš„*] ä»£ç†å˜é‡

--

- å¦‚æœ `\({X}\)` æ˜¯ .hi-pink[ç¦»æ•£çš„]ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘å¹³ç­‰æ€§ï¼Œå¦‚ `\(w_i(j) = {I}({X}_{i} = {X}_{j})\)`ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œç¼©æ”¾ä»è€Œå¾—åˆ° `\(\sum_j w_i(j) = 1\)` ã€‚

---
name: nn-euclidean
## ç›¸ä¼¼æ€§Proximity

- æˆ‘ä»¬é€‰æ‹©çš„æƒé‡ `\(w_i(j)\)` åº”è¯¥æ˜¯åæ˜ å¹²é¢„ç»„ç‰¹å¾ `\({X}_{i}\)` ä¸æ§åˆ¶ç»„ç‰¹å¾ `\({X}_{j}\)` .hi-slate[*å¦‚ä½•æ¥è¿‘çš„*] ä»£ç†å˜é‡

- å¦‚æœ `\({X}\)` æ˜¯ .hi-purple[è¿ç»­çš„]ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘.hi.it[ç›¸ä¼¼æ€§] è€Œé.hi.it[å¹³ç­‰æ€§]ã€‚

- .purple[*æœ€è¿‘é‚»åŒ¹é…*] ä½¿ç”¨çš„æ˜¯ `\({X}_{i}\)` å’Œ `\({X}_{j}\)` ä¹‹é—´çš„æ¬§å‡ é‡Œå¾—è·ç¦»ï¼Œä¸ºå¹²é¢„ç»„ä¸ªä½“é€‰æ‹©ä¸€ä¸ªæœ€æ¥è¿‘çš„æ§åˆ¶ç»„è§‚å¯Ÿç‚¹

$$
`\begin{align}
  {d}_{i,j} = \left( {X}_{i} - {X}_{j} \right)'\left({X}_{i} - {X}_{j}\right)
\end{align}`
$$

--

- æ¯ä¸ªä¸ªä½“çš„å¤„ç½®æ•ˆåº”è®°ä½œï¼š `\(\hat{\tau}_i = {Y}_{1i} - {Y}_{0j}^i\)` ï¼Œå…¶ä¸­ `\({Y}_{0j}^i\)` æ˜¯ `\(i\)` ä¸ªä½“åœ¨æ§åˆ¶ç»„ä¸­æœ€è¿‘é‚»
- .hi-slate[ATEä¼°è®¡å€¼:] `\(\hat{\tau}_M = \frac{1}{N_T} \sum_i \hat{\tau}_i\)`
- å¦‚æœCIAæˆç«‹å¹¶ä¸”æœ‰è¶³å¤Ÿçš„é‡å åŒºåŸŸï¼Œå°±èƒ½è®¡ç®—å¤„ç½®æ•ˆåº”ã€‚
- ç¼ºç‚¹æ˜¯:æ¬§å¼è·ç¦»å—é‡çº²çš„å½±å“ï¼Œä¸¤ç‚¹ä¹‹é—´çš„æ¬§æ°è·ç¦»ä¸åŸå§‹æ•°æ®æµ‹é‡å•ä½ç›¸å…³ .mono[-&gt;] åŸå§‹æ•°æ®è¦è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†

---
name: nn-mahalanobis
## ç›¸ä¼¼æ€§Proximity

- æˆ‘ä»¬é€‰æ‹©çš„æƒé‡ `\(w_i(j)\)` åº”è¯¥æ˜¯åæ˜ å¹²é¢„ç»„ç‰¹å¾ `\({X}_{i}\)` ä¸æ§åˆ¶ç»„ç‰¹å¾ `\({X}_{j}\)` .hi-slate[*å¦‚ä½•æ¥è¿‘çš„*] ä»£ç†å˜é‡

- å¦‚æœ `\({X}\)` æ˜¯ .hi-purple[è¿ç»­çš„]ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘.hi.it[ç›¸ä¼¼æ€§] è€Œé.hi.it[å¹³ç­‰æ€§]ã€‚

- ä½¿ç”¨.purple[é©¬å“ˆæ‹‰è¯ºæ¯”æ–¯è·ç¦»]ä½œä¸º.purple[*æœ€è¿‘é‚»åŒ¹é…*ï¼š] åœ¨  `\({X}_{i}\)` ä¸ `\({X}_{j}\)` ä¹‹é—´ä½¿ç”¨æœ€è¿‘çš„.purple[é©¬æ°è·ç¦»] é€‰æ‹©å”¯ä¸€åŒ¹é…
$$
`\begin{align}
  {d}_{i,j} = \left( {X}_{i} - {X}_{j} \right)' \Sigma_{X}^{-1} \left({X}_{i} - {X}_{j}\right)
\end{align}`
$$
å…¶ä¸­ `\(\Sigma_{X}^{-1}\)` æ˜¯ `\({X}\)` çš„åæ–¹å·®çŸ©é˜µ

--

- .hi-slate[ATEä¼°è®¡å€¼:] `\(\hat{\tau}_M = \frac{1}{N_T} \sum_i \hat{\tau}_i\)` ï¼Œå…¶ä¸­ `\(\left(\hat{\tau}_i = {Y}_{1i} - {Y}_{0j}^i\right)\)`
- å¦‚æœCIAæˆç«‹å¹¶ä¸”æœ‰è¶³å¤Ÿçš„é‡å åŒºåŸŸï¼Œå°±èƒ½è®¡ç®—å¤„ç½®æ•ˆåº”ã€‚
- .pink[ä¼˜ç‚¹:]é©¬æ°è·ç¦»ä¸å—é‡çº²çš„å½±å“ï¼Œä¸¤ç‚¹ä¹‹é—´çš„é©¬æ°è·ç¦»ä¸åŸå§‹æ•°æ®æµ‹é‡å•ä½æ— å…³ï¼›ç”±æ ‡å‡†åŒ–æ•°æ®å’Œä¸­å¿ƒåŒ–æ•°æ®è®¡ç®—å‡ºçš„äºŒç‚¹ä¹‹é—´çš„é©¬æ°è·ç¦»ç›¸åŒï¼›æ’é™¤å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§çš„å¹²æ‰°ã€‚.purple[ç¼ºç‚¹:]å¤¸å¤§äº†å˜åŒ–å¾®å°çš„å˜é‡çš„ä½œç”¨ã€‚
- é©¬æ°è·ç¦»æ˜¯æ¬§æ°è·ç¦»çš„æ³›åŒ–ï¼Œå½“åæ–¹å·®çŸ©é˜µä¸ºå•ä½çŸ©é˜µæ—¶å°±æ˜¯æ¬§æ°è·ç¦»äº†ã€‚

---
## åŒ¹é…æ³•çš„å‡è®¾ä¸æ¡ä»¶

1. .hi-purple[æ¡ä»¶ç‹¬ç«‹å‡è®¾:] `\(\left( {Y}_{0i},\, {Y}_{1i} \right) \perp {D}_{i}|{X}_{i}\)`

    - CIAåœ¨åŒ¹é…æ³•è¯­å¢ƒä¸‹çš„ç†è§£ä¸ºï¼šåœ¨ç»™å®šå¯è§‚æµ‹å˜é‡ `\(X_i\)` åï¼Œè¿›å…¥å¹²é¢„ç»„è¿˜æ˜¯æ§åˆ¶ç»„æ˜¯éšæœºåˆ†é…çš„ï¼Œä¸ä¼šå› ä¸ºæ½œåœ¨ç»“æœçš„å¥½åè€Œå†³å®šæ˜¯å¦æ¥å—å¹²é¢„
    
2. .hi-purple[é‡å (Overlap):] `\(0 &lt; {{Pr}}\left({D}_{i} = 1 \mid {X}_{i}\right) &lt; 1\)`

    - ç»™å®šå¯è§‚æµ‹ç‰¹å¾ `\(X_{i}=x\)`, ä¸ªä½“æ¥å—å¹²é¢„çš„æ¦‚ç‡å¤§äº0å¹¶å°äº1

- ä¸¤è€…åŒæ—¶æ»¡è¶³ï¼Œç»™å®šè§‚æµ‹ç‰¹å¾ `\(X_{i}=x\)` çš„ATEä¸ºï¼š

- å¯¹ç‰¹å¾ä¸º `\(x\)` çš„ä¸ªä½“ `\(ATT(x)=A T U(x)=A T E(x)\)` .mono[-&gt;] `\(A T E=E_{X}[A T E(X)]=\sum_{x} A T E(x) P(x)\)`

---
## å•é‚»å±… .mono[-&gt;] å¤šé‚»å±…åŒ¹é… .mono[-&gt;] å€¾å‘å¾—åˆ†åŒ¹é…

- å•é‚»å±…åŒ¹é…åœ¨ `\(N_C\gg N_T\)` æ—¶ï¼Œå°±ä¼šä¸¢æ‰**å¾ˆå¤š**æ§åˆ¶ç»„ä¸ªä½“ .mono[-&gt;] ä¿¡æ¯æµªè´¹

  - å¤šé‚»å±…ä½¿ç”¨.hi.purple[æ ¸åŒ¹é…Kernel matching]ï¼Œéœ€è¦é€‰æ‹©ï¼šæ ¸å¯†åº¦å‡½æ•°.mono[+]å¸¦å®½

- å½“ä½¿ç”¨å¤šä¸ªå¯è§‚æµ‹ç‰¹å¾åŒ¹é…æ—¶ï¼Œé¢ä¸´"ç»´æ•°çš„è¯…å’’"
  - å¯è§‚æµ‹ç‰¹å¾ç»´æ•°å¢åŠ æ—¶ï¼Œä¸ºæ¯ä¸ªå¹²é¢„ç»„ä¸ªä½“æ‰¾åˆ°ä¸€ä¸ªå¾ˆå¥½çš„ã€è¿‘è·ç¦»çš„æ§åˆ¶ç»„ä¼šå¾ˆå›°éš¾ã€‚



- å€¾å‘å¾—åˆ†æ³•(Propensity Score Methodsï¼ŒPSM)

  - åŸç†ï¼šé€šè¿‡å‡½æ•°å…³ç³»å°†å¤šç»´ç‰¹å¾å˜é‡ `\({X}\)` å˜æ¢ä¸ºä¸€ç»´çš„å€¾å‘å¾—åˆ†
`\(psï¼ˆX_iï¼‰\)` ä¹‹åï¼Œå†æ ¹æ®å€¾å‘å¾—åˆ†è¿›è¡ŒåŒ¹é…ã€‚å€¾å‘å¾—åˆ†æ˜¯å¯è§‚æµ‹ç‰¹å¾ä¸º `\(X_i=x\)` çš„ä¸ªä½“è¿›å…¥å¹²é¢„ç»„ï¼ˆæ¥å—å¹²é¢„ï¼‰çš„æ¦‚ç‡
`$$p s\left(X_{i}=x\right)=P\left(D_{i}=1 \mid X_{i}=x\right)$$`

---
layout: true
# å€¾å‘å¾—åˆ†åŒ¹é…

---
class: inverse, middle
---
layout: false
## åŸç†

- åŒ¹é…æ³•çš„å‡è®¾ä¸æ¡ä»¶ï¼š.hi.purple[CIA .mono[+] Overlap]

- .hi.purple[CIA] .mono[-&gt;] .hi.pink[å€¾å‘å¾—åˆ†å®šç†]

  - å¦‚æœ `\(\left( {Y}_{0i},\,{Y}_{1i} \right) \perp {D}_{i}|{X}_{i},\,\)` ç­‰ä»·äº `\(\left( {Y}_{0i},\,{Y}_{1i} \right) \perp {D}_{i}|ps({X}_{i}).\)`

  - é€šä¿—ç†è§£: å€¾å‘å¾—åˆ† `\(p s\left(X_{i}\right)\)` æ€»ç»“äº†å˜é‡ `\(X_{i}\)` ä¸­åŒ…å«çš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯

- .hi[å€¾å‘å¾—åˆ†æ˜¯å‡è¡¡å¾—åˆ†] .mono[-&gt;] ä¸€ç»´å¾—åˆ†ä»£æ›¿å¤šç»´ç‰¹å¾.mono[-&gt;] è‹¥å¹²é¢„ç»„å’Œæ§åˆ¶ç»„çš„ä¸ªä½“æœ‰ç›¸åŒçš„å€¾å‘å¾—åˆ†ï¼Œä¸¤ç»„çš„.hi.purple[å¯è§‚æµ‹ç‰¹å¾åˆ†å¸ƒåœ¨ä¸¤ç»„å°±æ˜¯å‡è¡¡çš„].super[.pink[â€ ]] `$$X_{i} \perp D_{i} \mid p s\left(X_{i}\right)$$`

  - è‹¥åªå…³å¿ƒå‡å€¼ï¼Œåˆ™ä¸Šå¼å¯ç®€åŒ–ä¸ºï¼š 
  `\(E\left(X_{i} \mid D_{i}=1,p s\left(X_{i}\right)\right)=E\left(X_{i} \mid D_{i}=0, p s\left(X_{i}\right)\right)\)` 
  

.footnote[
.pink[â€ ] ä¸å¯è§‚æµ‹çš„ç‰¹å¾ä¸ä¸€å®šæ˜¯å‡è¡¡çš„ï¼Œå› æ­¤å‰æè¦æ±‚ä¸å¯è§‚æµ‹çš„ç‰¹å¾ä¸å¹²é¢„å˜é‡æ— å…³ã€‚åœ¨RCTä¸­ï¼Œå€¾å‘å¾—åˆ†æ˜¯å·²çŸ¥çš„ã€‚æ¯ä¸ªäººè¢«åˆ†åˆ°å¹²é¢„ç»„æ¦‚ç‡æ˜¯50%ï¼Œå€¾å‘å¾—åˆ†å°±æ˜¯50%ã€‚åœ¨è§‚æµ‹æ•°æ®ä¸­ï¼Œå€¾å‘å¾—åˆ†æ˜¯æœªçŸ¥çš„ã€‚ ]

---
## å€¾å‘å¾—åˆ†å®šç†çš„è¯æ˜

- .hi.attn[å®šç†ï¼š] `\(\left( {Y}_{0i},\,{Y}_{1i} \right) \perp {D}_{i}|{X}_{i},\,\)` ç­‰ä»·äº `\(\left( {Y}_{0i},\,{Y}_{1i} \right) \perp {D}_{i}| ps({X}_{i}).\)`

è¦æƒ³è¯æ˜è¯¥å®šç†ï¼Œå°±è¦è¡¨æ˜ `\({{Pr}}\left({D}_{i}=1 \mid {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i})\right) = ps({X}_{i})\)`ï¼šåœ¨ç»™å®š `\(ps({X}_{i})\)` åï¼Œ `\({D}_{i}\)` ä¸ `\(\left( {Y}_{0i},\, {Y}_{1i} \right)\)` æ˜¯ç‹¬ç«‹çš„

`\({{Pr}}\!\bigg[{D}_{i}=1 \bigg| {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i})\bigg]\)`

.pad-left[
`\(={E}\!\bigg[{D}_i \bigg| {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i})\bigg]\)`
]

.pad-left[
`\(={E}\!\bigg[ {E}\!\bigg({D}_i \bigg| {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i}),\, {X}_{i} \bigg) \bigg| {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i})\bigg]\)`
]

.pad-left[
`\(={E}\!\bigg[ {E}\!\bigg({D}_i \bigg| {Y}_{0i},\, {Y}_{1i},\, {X}_{i} \bigg) \bigg| {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i})\bigg]\)`
]
---
## å€¾å‘å¾—åˆ†å®šç†çš„è¯æ˜

`\({{Pr}}\!\bigg[{D}_{i}=1 \bigg| {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i})\bigg]= \cdots ={E}\!\bigg[ {E}\!\bigg({D}_i \bigg| {Y}_{0i},\, {Y}_{1i},\, {X}_{i} \bigg) \bigg| {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i})\bigg]\)`

.pad-left[
`\(={E}\!\bigg[ {E}\!\bigg({D}_i \bigg| {X}_{i} \bigg) \bigg| {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i})\bigg]\)`
]

.pad-left[
`\(={E}\!\bigg[ ps({X}_{i}) \bigg| {Y}_{0i},\, {Y}_{1i},\, ps({X}_{i})\bigg]\)`
]

.pad-left[
`\(=ps({X}_{i})\)`
]


.mono[âˆ´] `\(\left( {Y}_{0i},\,{Y}_{1i} \right) \perp {D}_{i}|{X}_{i} \implies \left( {Y}_{0i},\,{Y}_{1i} \right) \perp {D}_{i}|ps({X}_{i})\)`â€ƒ.orange[âœ”]
---
## ç›´è§‰

.hi.qa[Q] è¿™åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ

- `\({X}_{i}\)` æ‰¿è½½çš„ä¿¡æ¯è‚¯å®šè¦æ¯” `\(ps({X}_{i})\)` å¤šï¼Œ é‚£ä¹ˆå¦‚ä½•æ‰èƒ½é€šè¿‡ç»™å®š `\(ps({X}_{i})\)` æƒ…å†µæ¥è·å¾—å¹²é¢„çš„æ¡ä»¶ç‹¬ç«‹æ€§å‘¢ï¼Ÿ 

- .hi.qa[A].sub[.pink[1]] å¹²é¢„çš„æ¡ä»¶ç‹¬ç«‹æ€§å¹¶ä¸æ˜¯ä» `\({X}_{i}\)` ä¸­æå–æ‰€æœ‰å¯èƒ½çš„ä¿¡æ¯ã€‚å®é™…ä¸Šåªå…³å¿ƒç»™å®š `\({D}_{i}\)` ä¸‹å…¶ä»–ç‰¹å¾å˜é‡ä¸ `\(( {Y}_{0i},\,{Y}_{1i})\)` æ— å…³çš„æƒ…å†µã€‚

- .hi.qa[A].sub[.pink[2]] å›åˆ°ä¸»è¦å…³æ³¨ç‚¹ï¼š.hi[é€‰æ‹©åè¯¯].mono[-&gt;]äººä»¬ä¼šé€‰æ‹©æ˜¯å¦è¿›å…¥å¹²é¢„ç»„ã€‚ å¦‚æœæ§åˆ¶ä½ `\({X}\)` ååæ˜ äº†ä¸¤ä¸ªäººè¿›å…¥å¹²é¢„ç»„çš„æ¦‚ç‡æ˜¯ç›¸ç­‰çš„ï¼Œå¹¶ä¸”å¦‚æœ `\({X}_{i}\)` è§£é‡Šäº†æ‰€æœ‰çš„é€‰æ‹©è¿›å…¥å¹²é¢„ç»„çš„åŸå› (CIA)ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªäººä¸å¯èƒ½ä¼šé€‰æ‹©è¿›å…¥å¹²é¢„ç»„ã€‚
---
name: estimation
## ä¼°è®¡

- å¦‚ä½•è·å¾—å€¾å‘å¾—åˆ†ï¼Ÿ

æˆ‘ä»¬å¯¹å®ƒä»¬è¿›è¡Œä¼°è®¡--æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼š

1. çµæ´»æ€§ (_å¦‚_, ç›¸äº’é¡¹) Probitæˆ–Logitæ¨¡å‹
2. æ ¸å‡½æ•°ä¼°è®¡
3. å…¶ä»–æ–¹æ³•ï¼šæœºå™¨å­¦ä¹ ç­‰


---
## ä¼°è®¡

 *MHE* (p. 83)

.qa[é—®é¢˜]

&gt; æœ€å¤§çš„é—®é¢˜æ˜¯å¦‚ä½•é€‰æ‹©æœ€ä¼˜æ¨¡å‹å»ä¼°è®¡ `\(ps({X}_{i})\)`...

.qa[å›ç­”]

&gt; è¦è§†å…·ä½“åº”ç”¨çš„æƒ…å†µè€Œå®šã€‚è¶Šæ¥è¶Šå¤šçš„å®è¯æ–‡çŒ®è¡¨æ˜ï¼Œåœ¨è¿ç»­åå˜é‡ä¸­å¸¦æœ‰å‡ ä¸ªå¤šé¡¹å¼é¡¹çš„å€¾å‘å¾—åˆ†çš„Logitæ¨¡å‹åœ¨å®è·µä¸­è¿ä½œè‰¯å¥½.....


---
name: application
## åº”ç”¨

- å‡è®¾å·²ç»è·å¾—äº†çš„å€¾å‘æ€§åˆ†æ•°ä¼°è®¡å€¼ `\(hat{p}({X}_{i})\)` ã€‚æ¥ä¸‹æ¥å‘¢ï¼Ÿ

- .note[é€‰é¡¹ 1ï¼š]  å°†å…¶ä½œä¸ºæ§åˆ¶å˜é‡ .mono[+] å›å½’

  - .note[é€‰é¡¹ 1aï¼š] ä½¿ç”¨ `\(ps({X}_{i})\)` è¿›è¡Œ .b[æ¡ä»¶å›å½’]
$$
`\begin{align}
   {Y}_{i} = \alpha + \delta {D}_{i} + \beta ps({X}_{i}) + u_i \tag{1a}
\end{align}`
$$
  - .note[é€‰é¡¹ 1bï¼š] å¦‚æœæƒ³è¦å¾—åˆ°å¼‚è´¨æ€§å¤„ç½®æ•ˆåº”ï¼Œæ„å‘³ç€å¼‚è´¨æ€§å¤„ç½®æ•ˆåº”ä¸ç‰¹å¾ `\({X}\)` å…±å˜ï¼Œå¢åŠ å¹²é¢„å˜é‡ä¸å€¾å‘å¾—åˆ† `\(ps({X}_{i})\)` çš„.b[äº¤äº’é¡¹]

$$
`\begin{align}
   {Y}_{i} = \alpha + \delta_1 {D}_{i} + \delta_2 {D}_{i} ps({X}_{i}) + \beta ps({X}_{i}) + u_i \tag{1b}
\end{align}`
$$
---
name: heterogeneity
## å›å½’çš„å¼‚è´¨æ€§

- å†æ€è€ƒä¸€ä¸‹è¿™ç§æƒ…å†µä¸‹çš„å¼‚è´¨æ€§å¤„ç½®æ•ˆåº”
$$
`\begin{align}
  {Y}_{0i} &amp;= \alpha + \beta {X}_{i} + u_i \\
  {Y}_{1i} &amp;= {Y}_{0i} + \delta_1 + \delta_2 {X}_{i}
\end{align}`
$$
ä¾‹å¦‚, ä¼°è®¡å¤„ç½®æ•ˆåº”ä¾èµ–äº `\({X}_{i}\)` 

.pad-left[
`\({Y}_{i} = {D}_{i}{Y}_{1i} + \left( 1 - {D}_{i} \right) {Y}_{0i}\)`

.pad-left[
`\(= {D}_{i}\bigg( {Y}_{0i} + \delta_1 + \delta_2 {X}_{i} \bigg) + \left( 1 - {D}_{i} \right) {Y}_{0i}\)`
]

.pad-left[
`\(= {Y}_{0i} + \delta_1 {D}_{i} + \delta_2 {D}_{i} {X}_{i}\)`
]

.pad-left[
`\(= \alpha + \delta_1 {D}_{i} + \delta_2 {D}_{i} {X}_{i} + \beta {X}_{i} + u_i\)`
]
]
---
## å¼‚è´¨æ€§

- æœ€åä¸€ä¸ªæ–¹ç¨‹ä¸ºï¼š
$$
`\begin{align}
  {Y}_{i} = \alpha + \delta_1 {D}_{i} + \delta_2 {D}_{i} {X}_{i} + \beta {X}_{i} + u_i
\end{align}`
$$


å¦‚æœæƒ³è¦å¾—åˆ° `\(ps({X}_{i})\)` å’Œ `\({D}_{i}ps({X}_{i})\)` çš„ä¼°è®¡ç³»æ•°ï¼š
$$
`\begin{align}
   {Y}_{i} = \alpha + \delta_1 {D}_{i} + \delta_2 {D}_{i} ps({X}_{i}) + \beta ps({X}_{i}) + u_i \tag{1b}
\end{align}`
$$


è¿™æ„å‘³ç€è¦åŒºåˆ†ï¼š
1. .hi-slate[ç‰¹å®šç»„åˆ«çš„å¤„ç½®æ•ˆåº”ï¼š] å¯¹äºæ¯ä¸€ä¸ª `\({X}_{i}\)` çš„ `\(\delta_1 + \delta_2 ps({X}_{i})\)` 

2. .hi-slate[ATEï¼š] `\(\delta_1 + \delta_2 \overline{p}({X}_{i})\)`


---
## æ›´ä¸ºçµæ´»

- ä½¿ç”¨å€¾å‘å¾—åˆ†åŒ¹é…çš„åˆè¡·æ˜¯ï¼šé™ä½ç»´åº¦ï¼Œä¼°è®¡/é€‰æ‹©/å‡è®¾æ›´å°‘çš„å‚æ•°

- åœ¨çº¿æ€§å›å½’ä¸­åŠ å…¥ `\(ps({X}_{i})\)` å’Œ `\({D}_{i}ps({X}_{i})\)` ä½œä¸ºåå˜é‡å¹¶ä¸èƒ½å®Œå…¨å‘æŒ¥çµæ´»/éå‚æ•°ä¼°è®¡çš„æ½œåŠ›

---
name: blocking
## åˆ†å—

- .note[é€‰æ‹© 2ï¼š] å¯¹å€¾å‘å¾—åˆ†è¿›è¡Œåˆ†å—ï¼ˆåˆ†å±‚ï¼‰

1. å°† `\(hat{p}({X}_{i})\)` çš„èŒƒå›´åˆ†æˆ `\(K\)` åŒºé—´ï¼ˆä¾‹å¦‚_ï¼Œ0.05å®½çš„åŒºé—´ï¼‰ã€‚

1. å°†æ ·æœ¬æ”¾ç½®åˆ°å¯¹åº”çš„ `\(\hat{p}({X}_{i})\)` åŒºé—´å†…

1. è®¡ç®—æ¯ä¸ªåŒºå—å†…çš„å¤„ç½®æ•ˆåº”å·®å¼‚ `\(hat{tau}_k\)` 

1. ä¾æ®æ¯ä¸ªåŒºå—çš„æ ·æœ¬æ¯”é‡ï¼Œå¯¹ `\(\hat{\tau}_k\)` å–åŠ æƒå¹³å‡

$$
`\begin{align}
  \hat{\tau}_{Block} = \sum_{k = 1}^K  \hat{\tau}_k \dfrac{N_{1k} + N_{0k}}{N}
\end{align}`
$$


.note[æ³¨æ„ï¼š] ä½¿ç”¨ `\(ps({X}_{i})\)`  åˆ†å—ä¸æ ¸å‡½æ•°è®¡ç®—çš„è·ç¦»é€»è¾‘ç›¸ä¼¼
---
### é€‰æ‹©åˆ†å—

- å¯¹å€¾å‘å¾—åˆ†åˆ†åŒºé—´ï¼Œéœ€è¦å®šä¹‰æ¯ä¸ªåŒºé—´

- å®é™…æ“ä½œä¸­ä¼šæœ‰å¤šæ¬¡å°è¯• 

   1. .hi[é€‰æ‹©åˆç†çš„åŒºé—´èŒƒå›´]

   1. ä¿è¯.hi[æ¯ä¸ªç‰¹å¾å˜é‡] åœ¨æ¯ä¸ªåˆ†å—ä¸­è¦å‡è¡¡
   &lt;p&gt; -å¦‚æœç‰¹å¾å˜é‡åœ¨åˆ†å—ä¸­.hi[ä¸å¹³è¡¡] ï¼Œé‡æ–°åˆ†å—
   &lt;p&gt; - å¦‚æœç‰¹å¾å˜é‡åœ¨åˆ†å—ä¸­.hi[å¹³è¡¡] ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥

- ç¼ºé™·ï¼šå¤šå˜é‡æƒ…å½¢éš¾ä»¥ä¿è¯æ¯ä¸ªå˜é‡åœ¨æ¯ä¸ªå—ä¸­éƒ½å‡è¡¡ï¼Œéœ€è¦æ¥å—ä¸ªåˆ«ä¸é‡è¦å˜é‡çš„ä¸å‡è¡¡ï¼Œå› æ­¤éœ€è¦ä¸€å®šçš„ä¸»è§‚åˆ¤æ–­ã€‚

---
### é‡å 

- åˆ†å—å¼ºè°ƒäº†.hi.purple[é‡å å‡è®¾]ï¼š `\(0&lt;{{Pr}}\left({D}_{i} | {X}_{i}\right)&lt;1\)`.

- å¦‚æœæŸä¸ªåŒºå—åŒ…å«äº†é›¶ä¸ªå¹²é¢„æˆ–è€…æ§åˆ¶æ ·æœ¬ï¼Œå°±æ— æ³•è®¡ç®—å‡º `\(\hat{\tau}_k\)`.

- .attn[æ³¨æ„äº‹é¡¹ï¼š] Logit/Probit å¯ä»¥éšè—è¿è§„è¡Œä¸ºï¼Œå› ä¸ºå®ƒè¿«ä½¿å€¾å‘å¾—åˆ†ä¼°è®¡å€¼ `\(0 &lt; \hat{ps}({X}_{i}) &lt; 1\)` 
- .note[å¸¸è§åšæ³•ï¼š] ç»éªŒæ€§åœ°æ‰§è¡Œé‡å çš„æ£€éªŒ

  - åœ¨å¹²é¢„ç»„ä¸­å°† `\(\hat{ps}({X}_{i})\)` ä½äºæœ€ä½å€¾å‘å¾—åˆ†çš„æ§åˆ¶ç»„æ ·æœ¬åˆ é™¤

  - åœ¨æ§åˆ¶ç»„ä¸­å°† `\(\hat{ps}({X}_{i})\)` é«˜äºæœ€é«˜å€¾å‘å¾—åˆ†çš„å¹²é¢„ç»„æ ·æœ¬åˆ é™¤
  
---
name: weighting
## åŠ æƒ

- .note[é€‰é¡¹ 3ï¼š] ä¾æ®å€¾å‘å¾—åˆ†ä¸ºæ¯ä¸ªæ ·æœ¬åå‘èµ‹æƒ

- .qa[Q] ç”¨ `\(1/\hat{ps}({X}_{i})\)` åŠ æƒæ„ä¹‰ä½•åœ¨ï¼Ÿ

- .qa[A] è€ƒè™‘ä¸€ä¸‹"è€æœ‹å‹"(å¸¦æœ‰åè¯¯çš„)ä¸¤ç»„å‡å€¼ä¹‹å·®ï¼š
$$
`\begin{align}
  \hat{\tau}_{Diff} = \overline{{Y}}_{T} - \overline{{Y}}_{C} = \dfrac{\sum_i {D}_{i} {Y}_{i}}{\sum_i {D}_{i}} - \dfrac{\sum_i \left(1 - {D}_{i}\right) {Y}_{i}}{\sum_i \left(1 - {D}_{i}\right)}
\end{align}`
$$


- ç”±äºæ ·æœ¬å¯¹æ˜¯å¦å¹²é¢„æœ‰é€‰æ‹©ï¼Œå¯¼è‡´åè¯¯ï¼š
$$
`\begin{align}
  {E}\left[ {Y}_{0i} | {D}_{i} = 1 \right] \neq {E}\left[ {Y}_{0i} \right]
\end{align}`
$$
---
### åŠ æƒçš„ä¾æ®

- å‡è®¾å·²çŸ¥ `\(ps({X}_{i})\)` ï¼Œå¹¶ä¸”ç”¨ `\(1/ps({X}_{i})\)` å¯¹æ¯ä¸ª.hi-pink[å¹²é¢„ç»„]ä¸ªä½“è¿›è¡ŒåŠ æƒã€‚

--


`\({E}\left[ \dfrac{{D}_{i} {Y}_{i}}{ps({X}_{i})} \right]\)`

--
 `\(= {E}\left[ \dfrac{{D}_{i}\left({D}_{i}{Y}_{1i} + (1-{D}_{i}){Y}_{0i}\right)}{ps({X}_{i})} \right]\)`

--
 `\(= {E}\left[ \dfrac{{D}_{i} {Y}_{1i}}{ps({X}_{i})} \right]\)`

--
&lt;br&gt;&lt;br&gt;â€ƒ `\(= {E}\!\bigg( {E}\left[ \dfrac{{D}_{i}{Y}_{1i}}{ps({X}_{i})} \;\middle|\; {X}_{i} \right] \bigg)\)`

--
 `\(= {E}\!\bigg( \dfrac{{E}\left[ {D}_{i} \mid {X}_{i} \right] {E}\left[ {Y}_{1i} \mid {X}_{i} \right]}{ps({X}_{i})} \bigg)\)`

--
&lt;br&gt;&lt;br&gt;â€ƒ `\(= {E}\!\bigg( \dfrac{ps({X}_{i}) {E}\left[ {Y}_{1i} \mid {X}_{i} \right]}{ps({X}_{i})} \bigg)\)`

--
 `\(= {E}\!\bigg( {E}\left[ {Y}_{1i} \mid {X}_{i} \right] \bigg)\)`

--
 `\(\color{#e64173}{= {E}\left[ {Y}_{1i} \right]}\)`


--

- åŒæ ·åœ°, ç”¨ `\(1/(1-ps({X}_{i}))\)` å¯¹ .hi-purple[æ§åˆ¶ç»„] ä¸ªä½“å¯ä»¥å¾—åˆ°ï¼š
$$
`\begin{align}
  {E}\left[ \dfrac{(1-{D}_{i}){Y}_{i}}{1-ps({X}_{i})} \right] = \color{#6A5ACD}{{E}\left[ {Y}_{0i} \right]}
\end{align}`
$$
---
### åŠ æƒï¼šå€¾å‘å¾—åˆ†åŒ¹é…ä¼°è®¡å€¼

- å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼°è®¡æ— åçš„å¤„ç½®æ•ˆåº”
$$
`\begin{align}
  \hat{\tau}_{ps{Weight}} = \dfrac{1}{N} \sum_{i=1}^N \left[ \dfrac{{D}_{i}{Y}_{i}}{ps({X}_{i})} - \dfrac{(1-{D}_{i}{Y}_{i})}{1 - ps({X}_{i})} \right]
\end{align}`
$$

- .note[ç›´è§‚ä¸Šï¼š] ä»¥ `\({X}_{i}\)` ä¸ºå‡½æ•°ä¸ºå¹²é¢„ç»„ä¸ªä½“æ¥å—å¹²é¢„èµ‹äºˆæ›´é«˜çš„ `\(ps({X}_{i})\)` ï¼Œæ¥è¯•å›¾å…‹æœé€‰æ‹©åå·®

--

- è¯•å›¾è®©å¹²é¢„ç»„ä¸ªä½“å›åˆ°.b[åƒæ˜¯éšæœºåˆ†é…ä¸€æ ·]

  - .pink[(1)] ä¸º.hi-pink[ä½åˆ†å€¼] `\(\color{#e64173}{ps({X}_{i})}\)`  .hi-pink[å¹²é¢„ç»„ä¸ªä½“]æé«˜æƒé‡ï¼Œ&lt;br&gt;.purple[(2)]  ä¸º.hi-purple[é«˜åˆ†å€¼] `\(\color{#6A5ACD}{ps({X}_{i})}\)` .hi-purple[æ§åˆ¶ç»„æ ·æœ¬]æé«˜æƒé‡ã€‚
  
---
### ä¾‹å­

- å‡è®¾å¯¹æŸäº›ä¸ªä½“ `\(i\)` ï¼Œ `\(ps({X}_{i}) = 0.80\)`.

- è¿™ä¸ªpså¾—åˆ†è¯´æ˜æŸäº›å¸¦æœ‰ `\({X}_{i}\)` ç‰¹å¾çš„ä¸ªä½“åˆ†é…åˆ°.hi-pink[å¹²é¢„ç»„]æ¦‚ç‡æ˜¯åˆ†é…åˆ°.hi-purple[æ§åˆ¶ç»„]æ¦‚ç‡çš„4å€

- åå‘åŠ æƒå¯ä»¥è§£å†³æ¯ä¸€ä¸ªå…·æœ‰ `\({X}_{i}\)` ç‰¹å¾ä¸ªä½“çš„ä¸å¹³è¡¡é—®é¢˜ 

  - å¦‚æœ `\(i\)` æ˜¯ .hi-pink[å¹²é¢„ç»„]ï¼Œé‚£ä¹ˆä»–æƒé‡æ˜¯ `\(1/ps({X}_{i}) = 1/0.80 = 1.25\)`

  - å¦‚æœ `\(i\)` æ˜¯ .hi-purple[æ§åˆ¶ç»„]ï¼Œé‚£ä¹ˆä»–æƒé‡æ˜¯ `\(1/(1-ps({X}_{i})) = 1/(1-0.80) = 5\)`

  - é‚£ä¹ˆï¼Œ `\(5/1.25\)` æ˜¯ `\(4\)` .mono[!]

--

- è¯¥åŠ æƒæ–¹æ³•ä½¿æˆ‘ä»¬å›åˆ°ï¼šç»™å®šæ¯ä¸€ç»„ `\({X}_{i}\)` æ—¶ï¼Œ è¿›å…¥å¹²é¢„ç»„å’Œæ§åˆ¶ç»„çš„å¹³è¡¡

---
### åŠ æƒï¼šæœ€åé—®é¢˜

- .note[å®è·µä¸­é—®é¢˜ï¼š] ä¸ä¸€å®šèƒ½å¤Ÿä¿è¯ `\(\sum_i \hat{ps}({X}_{i}) = 1\)`.

- .note[è§£å†³æ–¹æ³•ï¼š] é€šè¿‡åŠ æ€»å°†æƒé‡è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ã€‚

- åº”ç”¨å½’ä¸€åŒ–åŠ æƒå€¾å‘å¾—åˆ†ä¼°è®¡å€¼ï¼š
$$
`\begin{align}
  \hat{\tau}_{p{Weight}} = \sum_{i=1}^N \dfrac{ \dfrac{{D}_{i}{Y}_{i}}{\hat{p}({X}_{i})} }{\sum_{i} \dfrac{{D}_{i}}{\hat{p}({X}_{i})}} -
  \sum_{i=1}^N \dfrac{ \dfrac{(1-{D}_{i}){Y}_{i}}{1-\hat{p}({X}_{i})} }{\sum_{i} \dfrac{(1-{D}_{i})}{1-\hat{p}({X}_{i})}}
\end{align}`
$$

- Hirano, Imbenså’ŒRidder (2003) è®¤ä¸ºè¯¥ä¼°è®¡å€¼æ˜¯æœ‰æ•ˆçš„

---
name: two
## ä¸ºä»€ä¹ˆåªé€‰æ‹©å…¶ä¸€å°±å¯ä»¥ï¼Ÿ

- åŠ æƒå¹³å‡æ•°æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œè€Œä¸”å›å½’å¯ä»¥åŠ æƒ

- å› æ­¤ï¼Œä¸€ä¸ª.hi-slate[åŸºäºå›å½’çš„ä¼°è®¡]
$$
`\begin{align}
  {Y}_{i} = \alpha + {X}_{i}\beta + \tau {D}_{i} + u_i
\end{align}`
$$
--
å…¶.hi-slate[æƒé‡]
$$
`\begin{align}
  w_i = \sqrt{\dfrac{{D}_{i}}{\hat{ps}({X}_{i})} + \dfrac{(1-{D}_{i})}{1-\hat{ps}({X}_{i})}}
\end{align}`
$$
--

- æä¾›äº†ä¸€ä¸ª**åŒé‡ç¨³å¥**çš„ç‰¹æ€§ï¼Œä½ æœ‰ä¸¤ä¸ªæœºä¼šæ˜¯æ­£ç¡®çš„ï¼šä¸€ä¸ªæ˜¯ `\(ps({X}_{i})\)` è®¡ç®—æ­£ç¡®ï¼Œå¦ä¸€ä¸ªæ˜¯å›å½’æ¨¡å‹è®¾å®šæ­£ç¡®ã€‚åªè¦ä¿è¯å…¶ä¸€å°±å¯ä»¥ã€‚

---
## ä¸ºä»€ä¹ˆåªé€‰æ‹©å…¶ä¸€å°±å¯ä»¥ï¼Ÿ

- æ›¿ä»£æ–¹æ¡ˆæ˜¯ï¼ŒåŒé‡ç¨³å¥çš„æ„æ€æ˜¯å°†å€¾å‘å¾—åˆ†åŒºå—ä¸å›å½’ç»“åˆ

--

- .note[Step 1] å¯¹æ¯ä¸ªåŒºå— `\(k\)`ï¼Œè¿›è¡Œå›å½’
$$
`\begin{align}
  {Y}_{i} = \alpha_k + {X}_{i} \beta_k + \tau_k {D}_{i} + u_i
\end{align}`
$$

--

- .note[Step 2] å¯¹æ‰€æœ‰åŒºå—çš„å¤„ç½®æ•ˆåº”åŠ æƒå¹³å‡
$$
`\begin{align}
  \hat{\tau} = \sum_{k=1}^K \hat{\tau}_k \dfrac{N_{1k} + N_{0k}}{N}
\end{align}`
$$
---
## åˆ†æ¸…ä¸»æ¬¡

- ä¸è¦(è¿‡äº)è¿·æ‹é‚£äº›èŠ±å“¨çš„ä¸œè¥¿

- ä»»ä½•è¯„å®¡éƒ½ä¼šä»¥ä¸‹ä¸¤ä¸ª.hi-slate[ä¸»è¦è¦æ±‚]æå‡ºè´¨ç–‘ï¼š

--

  1. .hi-slate[æ¡ä»¶ç‹¬ç«‹å‡è®¾]æ»¡è¶³å—ï¼Ÿ

  2. åœ¨å¹²é¢„ç»„å’Œæ§åˆ¶ç»„æ˜¯å¦æ»¡è¶³.hi-slate[é‡å ]ï¼Ÿ

--

- å¯¹äºç¬¬.hi-slate[2]ç§è´¨ç–‘ï¼Œä½¿ç”¨å€¾å‘å¾—åˆ†åŒ¹é….super[.pink[â€ ]]æ—¶å¯ä»¥åœ¨æ•°æ®ä¸­å¯»æ‰¾è¯æ®


- å¯ä»¥ç»˜åˆ¶.hi-pink[T]å’Œ.hi-purple[C]çš„ `\(ps({X}_{i})\)` çš„åˆ†å¸ƒã€‚

.footnote[.pink[â€ ] éšç€ `\({X}\)` ç»´åº¦æ‰©å¤§ï¼Œæ£€æŸ¥ `\({X}\)` ç©ºé—´ä¸­çš„é‡å æƒ…å†µä¼šå¾ˆå›°éš¾
]

---
name: overlap
layout: false
class: clear, middle

- æƒ…å†µä¸€ï¼š `\(ps({X}_{i})\)` ä¸å®Œå…¨é‡å ä¸”å‡å€¼ä¸ç›¸ç­‰
&lt;img src="CausalityPlus_01_Matching_files/figure-html/ex-no-overlap-1.svg" style="display: block; margin: auto;" /&gt;
---
class: clear, middle

- æƒ…å†µäºŒï¼š  `\(ps({X}_{i})\)` çš„ä¼°è®¡å€¼è¢«å¼ºåˆ¶æ‰§è¡Œå®Œå…¨é‡å ï¼Œä½†å‡å€¼ä¸ç›¸ç­‰
&lt;img src="CausalityPlus_01_Matching_files/figure-html/ex-overlap-p-1.svg" style="display: block; margin: auto;" /&gt;

---
class: clear, middle

- æƒ…å†µä¸‰ï¼š åŸºäºLogitå›å½’ä¼°å€¼ï¼ˆ0-1ï¼‰çš„ `\(\hat{ps}({X}_{i})\)` éšè—äº†æŸäº›æ²¡æœ‰é‡å çš„çœŸå® `\({ps}({X}_{i})\)`

&lt;img src="CausalityPlus_01_Matching_files/figure-html/ex-no-overlap-logit-1.svg" style="display: block; margin: auto;" /&gt;
---
layout: true
# å›å½’ä¸åŒ¹é…ç›¸åŒç‚¹

---
class: inverse, middle
---
layout: false
## ä¾‹å­

- å‡è®¾è§‚æµ‹æ•°æ®å¦‚ä¸‹ï¼šIDæ˜¯ä¸ªä½“ç¼–å·ï¼Œ Yæ˜¯è§‚æµ‹ç»“æœï¼ˆå¥åº·æƒ…å†µï¼‰ï¼Œ Dæ˜¯å¤„
ç½®ä¸å¦ï¼ˆæœè¯ä¸å¦ï¼‰ï¼ŒAGEæ˜¯å¯è§‚æµ‹ç‰¹å¾ï¼ˆå¹´é¾„ï¼‰

.center[
&lt;img src=https://pkuzzq-image.oss-cn-beijing.aliyuncs.com/uPic/ZgVLte.png height="400" &gt;

]
---
## ä¾‹å­

- æŒ‰å¹´é¾„å’Œæ¥å—å¤„ç½®ä¸å¦åˆ†æˆå››ç»„ï¼Œå¾—åˆ°æ¯ç»„Yçš„å¹³å‡å€¼å’Œäººæ•°ï¼ˆæ‹¬å·ä¸­æ•°å€¼ï¼‰ã€‚
.center[
&lt;img src=https://pkuzzq-image.oss-cn-beijing.aliyuncs.com/uPic/ommN7m.png height="200" &gt;
]

- å€˜è‹¥æ»¡è¶³CIAï¼Œé‚£ä¹ˆï¼š
  - `\(\widehat{A T E}\left(A G E_{i}=a g e\right)=\bar{Y}_{1}\left(A G E_{i}=a g e\right)-\overline{Y_{0}}\left(A G E_{i}=a g e\right) =\widehat{ATT}=\widehat{ATU}\)`
  - `\(\overline{A T T}=\sum_{a g e} P\left(A G E_{i}=a g e \mid D=1\right) \times \widehat{A T T}\left(A G E_{i}=a g e\right)\)` 
  - `\(\widehat{A T E}=\sum_{age} P\left(A G E_{i}=a g e\right) \times \widehat{A T E}\left(A G E_{i}=a g e\right)\)`

---
## ç²¾ç¡®åŒ¹é…

- å¯¹å¹´é¾„ä¸º 30 å²çš„:
  - å¹²é¢„ç»„: `\(\overline{Y_{1}}\left(A G E_{i}=30\right)=\frac{10+5}{2}=7.5\)`
  
  - æ§åˆ¶ç»„: `\(\overline{Y_{0}}\left(A G E_{i}=30\right)=\frac{12+6}{2}=9\)`
  - å¹³å‡å¤„ç½®æ•ˆåº”: `\(\widehat{A T E}\left(A G E_{i}=30\right)=\bar{Y}_{1}\left(A G E_{i}=30\right)-\)` `\(\bar{Y}_{0}\left(A G E_{i}=30\right)=-1.5\)`

- å¯¹å¹´é¾„ä¸º 40 å²çš„:
  - å¹²é¢„ç»„: `\(\overline{Y_{1}}\left(A G E_{i}=40\right)=\frac{5+12}{2}=8.5\)`
  
  - æ§åˆ¶ç»„: `\(\overline{Y_{0}}\left(A G E_{i}=40\right)=\frac{7+4+6+5}{4}=5.5\)`
  - å¹³å‡å¤„ç½®æ•ˆåº”: `\(\widehat{A T E}\left(A G E_{i}=40\right)=\overline{Y_{1}}\left(A G E_{i}=40\right)-\)` `\(\bar{Y}_{0}\left(A G E_{i}=40\right)=3\)`
  
---
## ç²¾ç¡®åŒ¹é… 

- åŒ¹é…ç›¸å¯¹å›å½’æ–¹æ³•çš„ä¼˜ç‚¹:
  - é€šè¿‡ç›¸å‡ï¼Œå¹´é¾„å¯¹å¥åº·çš„å½±å“å·²ç»å»é™¤ï¼Œä¸éœ€è¦å‡è®¾å¹´é¾„ä¸å¥åº·çš„å‡½æ•°å…³ç³»ã€‚

- è®¡ç®— `\(\widehat{A T E}\)` ï¼Œç”¨ä¸åŒå¹´é¾„äººæ•°çš„æ¯”ç‡ `\({P}\left(A G E_{i}=a g e\right)\)` ä¸ºæƒé‡:

  - `\(\widehat{A T E}=P\left(A G E_{i}=30\right) \times \widehat{A T E}\left(A G E_{i}=30\right)+P\left(A G E_{i}=40\right) \times \widehat{A T E}\left(AGE_{i}=40\right)\)` &lt;br&gt; `\(\quad \quad  =\frac{4}{10}(-1.5)+\frac{6}{10} \times 3=1.2\)`

- ç²¾ç¡®åŒ¹é…æ³•å…è®¸ä¸åŒå¹´é¾„çš„å¹³å‡å¤„ç½®æ•ˆåº”æ˜¯ä¸åŒçš„ï¼Œ å³**å…è®¸å¼‚è´¨å¤„ç½®æ•ˆåº”**ã€‚è¦å¾—åˆ°æ€»ä½“å¹³å‡å¤„ç½®æ•ˆåº”ï¼Œä½¿ç”¨ç›¸åº”äººæ•°æ¯”ä¾‹è¿›è¡ŒåŠ æƒå¹³å‡ã€‚
---
## å›å½’æ–¹æ³•ï¼šå®Œå…¨é¥±å’Œæ¨¡å‹

- .b[å®Œå…¨é¥±å’Œæ¨¡å‹:]å¯¹è§£é‡Šå˜é‡ï¼ˆæ§åˆ¶å˜é‡.mono[+]å¤„ç½®å˜é‡)çš„æ‰€æœ‰å¯èƒ½ç»„åˆå€¼(å«äº¤äº’é¡¹)éƒ½æœ‰å¯¹åº”ç³»æ•°çš„å›å½’æ¨¡å‹ã€‚

- ç”¨4ä¸ªè™šæ‹Ÿå˜é‡D0AGE30ã€D1AGE30ã€D0AGE40ã€D1AGE40æ¥ä»£è¡¨å››ä¸ªå¯èƒ½ç»„åˆã€‚

- å°†å®Œå…¨é¥±å’Œå›å½’æ¨¡å‹è®¾ç½®å¦‚ä¸‹:
`$$Y_{i}=\beta_{1} {D} 0 {AGE} 30_{i}+\beta_{2} {D} 1 {AGE} 30_{i}+\beta_{3} {D} 0 {AGE} 40_{i}+\beta_{4} {D} 1 {AGE} 40_{i}+e_{i}$$`
  - è¿™é‡Œä¸åŒ…æ‹¬æˆªè·å¸¸æ•°é¡¹, é¿å…å…±çº¿æ€§

- å®Œå…¨é¥±å’Œå›å½’æ¨¡å‹å¯¹åº”çš„æ¡ä»¶æœŸæœ›å‡½æ•°:
$$
`\begin{aligned}
&amp;E\left(Y_{i} \mid D0AGE30{i},D1AGE30{i},D0AGE40{i},D1AGE40{i} \right) \\
&amp;=\beta_{1} {D} 0 {AGE} 30_{i}+\beta_{2} {D} 1 {AGE} 30_{i}+\beta_{3} {D} 0 {AGE} 40_{i}+\beta_{4} {D} 1 {AGE} 40_{i}
\end{aligned}`
$$

- ç³»æ•‰å«ä¹‰ï¼š `\(\beta_{1}\)` ä¸ºå½“ `\({D}_{i}=0, {AGE}_{i}=30\)` æ—¶, `\(Y_{i}\)` çš„å‡å€¼ï¼›å…¶ä»–åŒç†ã€‚

---
## å›å½’æ–¹æ³•ï¼šå®Œå…¨é¥±å’Œæ¨¡å‹

- å®Œå…¨é¥±å’Œæ¨¡å‹çš„ç³»æ•°å¯¹åº”äº†ä¸åŒå¹´é¾„å¹²é¢„ç»„å’Œæ§åˆ¶ç»„è§‚æµ‹ç»“æœçš„å‡å€¼

- ç›¸åŒå¹´é¾„ç»„åˆ«çš„ç³»æ•°ä¹‹å·®å°±æ˜¯ä»£è¡¨è¯¥å¹´é¾„ç»„åˆ«çš„å¤„ç½®æ•ˆåº” .mono[-&gt;] ç²¾ç¡®åŒ¹é…ç»“æœ

.center[

**å®Œå…¨é¥±å’Œå›å½’æ¨¡å‹å’Œç²¾ç¡®åŒ¹é…å¾—åˆ°ç»“æœå®Œå…¨ä¸€è‡´**
]

---
layout: true
# å›å½’ä¸åŒ¹é…å·®å¼‚
---
class: inverse, middle
---
layout: false
## æ§åˆ¶å˜é‡é¥±å’Œæ¨¡å‹

- .b[æ§åˆ¶å˜é‡é¥±å’Œæ¨¡å‹:] å¯¹æ§åˆ¶å˜é‡çš„æ‰€æœ‰å¯èƒ½ç»„åˆå€¼(ä»…å«æ§åˆ¶å˜é‡é—´äº¤äº’)éƒ½æœ‰å¯¹åº”ç³»æ•°ã€‚

- ç”¨2ä¸ªè™šæ‹Ÿå˜é‡AGE30å’ŒAGE40æ¥ä»£è¡¨ä¸¤ä¸ªå¯èƒ½ç»„åˆ:

  - å½“ `\(A G E_{i}=30\)` æ—¶ï¼Œ `\(A G E 30_{i}=1\)`ï¼› å¦åˆ™ï¼Œ `\(A G E 30_{i}=0\)` ã€‚
  - å½“ `\(A G E_{i}=40\)` æ—¶ï¼Œ `\(A G E 40_{i}=1\)`ï¼› å¦åˆ™ï¼Œ `\(A G E 40_{i}=0\)` ã€‚

- å°†æ§åˆ¶å˜é‡é¥±å’Œæ¨¡å‹è®¾ç½®å¦‚ä¸‹:
`$$Y_{i}=\beta D_{i}+\phi_{1}  { AGE30 }_{i}+\phi_{2}  { AGE40}_{i} +e_{i}$$`
  - é¿å…å…±çº¿æ€§ï¼Œè¿™é‡ŒåŒæ ·ä¸åŒ…å«æˆªè·é¡¹
  - Då’ŒAGEä¸å†æœ‰äº¤å‰é¡¹ï¼Œæ„å‘³ç€å¯¹äºä¸åŒå¹´é¾„åªæœ‰ä¸€ä¸ªç›¸åŒçš„å¤„ç½®æ•ˆåº”ä¼°è®¡å€¼ã€‚

- ä»æ¡ä»¶æœŸæœ›å€¼æ¥çœ‹ç³»æ•°çš„å«ä¹‰ï¼š `\(\phi_{1}\)` ä¸ºå½“ `\({D}_{i}=0, {AGE}_{i}=30\)` æ—¶, `\(Y_{i}\)` çš„å‡å€¼ `\(\beta+\phi_{1}\)` ä¸ºå½“ `\({D}_{i}=1\)`,
`\({AGE}_{i}=30\)` æ—¶, `\(Y_{i}\)` çš„å‡å€¼; `\(\phi_{2}\)` ä¸ºå½“ `\({D}_{i}=0, {AGE}_{i}=40\)` æ—¶, `\(Y_{i}\)` çš„å‡å€¼; `\(\beta+\phi_{2}\)` ä¸ºå½“ `\({D}_{i}=1, {AGE}_{i}=40\)` æ—¶, `\(Y_{i}\)` çš„å‡å€¼

---
## æ§åˆ¶å˜é‡é¥±å’Œæ¨¡å‹

&lt;br&gt;&lt;br&gt;


- å¤„ç½®æ•ˆåº”å¯¹äº30å’Œ40ä¸¤ä¸ªç»„åˆ«çš„å¤„ç½®æ•ˆåº”æ—¶åŒè´¨çš„

- ä¸ç²¾ç¡®åŒ¹é…æ³•å’Œå®Œå…¨é¥±å’Œæ¨¡å‹å¾—åˆ°çš„å¤„ç½®æ•ˆåº”ä¼°è®¡ç•¥æœ‰å‡ºå…¥

---
## `\(\widehat{A T E}\)` å·®å¼‚ï¼šä¼°è®¡æƒé‡å·®å¼‚

- åœ¨ç²¾ç¡®åŒ¹é…æ¨¡å‹æˆ–å®Œå…¨é¥±å’Œå›å½’æ¨¡å‹ä¸­, `\(\widehat{A T E}\)` æ˜¯æ¯ä¸ª `\(\widehat{A T E}\left(A G E_{i}\right)\)` çš„åŠ æƒå¹³å‡å€¼, å…¶æƒé‡ä¸ºå¹²é¢„ç»„ä¸­ä¸åŒå¹´é¾„ä¸ªä½“çš„æ¯”ç‡, å³: 

`$$\widehat{A T E}=P\left(A G E_{i}=30\right) \times \widehat{A T E}\left(A G E_{i}=30\right)+P\left(A G E_{i}=40\right) \times \widehat{A T E}\left(A G E_{i}=40\right)$$` 
- åœ¨æ§åˆ¶å˜é‡é¥±å’Œå›å½’æ¨¡å‹ä¸­çš„å¤„ç½®æ•ˆåº”æ˜¯åŸºäºå›å½’æ–¹æ³•çš„ä¼°è®¡ç³»æ•°ï¼Œæ˜¯å»ºç«‹åœ¨æœ€å°åŒ–ä¼°è®¡æ–¹å·®åŸºç¡€ä¸Šã€‚å¯¹æ–¹å·®æœ€å°çš„å¹´é¾„ç»„åˆ«çš„å¤„ç½®æ•ˆåº”èµ‹äºˆæ›´å¤§çš„æƒé‡ã€‚

- è¦ä½¿ç²¾ç¡®åŒ¹é…/å®Œå…¨é¥±å’Œæ¨¡å‹ä¸æ§åˆ¶å˜é‡é¥±å’Œæ¨¡å‹å¾—åˆ°ç»“æœå®Œå…¨ä¸€è‡´, **å¤„ç½®æ•ˆåº”éœ€ä¸å­˜åœ¨å·®å¼‚åŒ–**, å³ `\(\widehat{A T E}\left(X_{i}={x}\right)\)` ä¸ºå¸¸æ•°ã€‚ 

- ç”±äºæ§åˆ¶å˜é‡é¥±å’Œæ¨¡å‹çš„å¤„ç½®å˜é‡ç³»æ•° `\(\widehat{\beta}\)` ä½¿ç”¨çš„æƒé‡å¹¶ä¸ç¬¦åˆATEå¯¹æƒé‡çš„å®šä¹‰, å› æ­¤å¹¶éATEçš„ä¸€è‡´æˆ–æ— åä¼°è®¡é‡ã€‚

- å®é™…è¿ç”¨ä¸­è¿˜ä¼šæ¶‰åŠåˆ°.b[éé¥±å’Œæ¨¡å‹:] `\(Y_{i}=\beta D_{i}+\phi {AGE}_{i}+e_{i}\)`, ä¸åŒå¹´é¾„å¯¹æ”¶å…¥çš„å½±å“ä¸€æ ·ï¼Œéƒ½ç­‰äº `\(\phi\)`ã€‚

---
## `\(\widehat{A T E}\)` å·®å¼‚ï¼šç¼ºä¹é‡å ä»¥åŠæ§åˆ¶å˜é‡ä¸å‡è¡¡

- é‡å ï¼šæŒ‡å¹²é¢„ç»„å’Œæ§åˆ¶ç»„æ§åˆ¶å˜é‡çš„åˆ†å¸ƒèŒƒå›´æ˜¯å¦é‡å ã€‚

- å‡è¡¡æ€§ï¼šæŒ‡å¹²é¢„ç»„å’Œæ§åˆ¶ç»„æ§åˆ¶å˜é‡çš„å‡å€¼æ˜¯å¦æ¥è¿‘

- å›å½’æ–¹æ³•ä¸­ï¼Œæœªè¿›è¡Œé‡å å’Œå‡è¡¡æ£€éªŒã€‚
  - åœ¨ä¸é‡å ã€ä¸å‡è¡¡çš„æƒ…å†µä¸‹ï¼Œå›å½’ä¼°è®¡çš„å¤„ç½®æ•ˆåº”ä¾èµ–äºå›å½’æ¨¡å‹å½¢å¼è®¾å®šæ˜¯å¦æ­£ç¡®ï¼Œå³ä½¿æ­£ç¡®ï¼Œç¨³å¥æ€§è¾ƒä½ã€‚

---
## `\(\widehat{A T E}\)` å·®å¼‚ï¼šä¾‹å­

- å‡è®¾æ”¶å…¥åªå—å—æ•™è‚²ç¨‹åº¦å’Œæ™ºå•†çš„å½±å“

.center[
&lt;img src=https://pkuzzq-image.oss-cn-beijing.aliyuncs.com/uPic/aYBlWq.png height="450"&gt;
]

---
## `\(\widehat{A T E}\)` å·®å¼‚ï¼šä¾‹å­

- åŒ¹é…æ–¹æ³•ï¼šå®Œå…¨é¥±å’Œæ¨¡å‹å’Œæ§åˆ¶å˜é‡é¥±å’Œæ¨¡å‹

  - ç²¾ç¡®åŒ¹é…æ³•: æ•°æ®ä¸æ»¡è¶³é‡å è¦æ±‚, æ— æ³•åŒ¹é…
    
      - æ™ºå•†é«˜äº100çš„ä¸ªä½“ï¼Œéƒ½ä¸Šå¤§å­¦,ä½äº100ï¼Œéƒ½æ²¡ä¸Šå¤§å­¦ â†’ å¹²é¢„ç»„å’Œæ§åˆ¶ç»„ä¸ªä½“æ— æ³•åŒ¹é… â†’ æ— æ³•ä¼°è®¡å„æ™ºå•†ä¸‹çš„ATEï¼Œæ— æ³•è®¡ç®—ATE
  
  - å®Œå…¨é¥±å’Œæ¨¡å‹ï¼šå…ˆé€šè¿‡å›å½’ç³»æ•°ä¼°è®¡å¾—åˆ°ä¸åŒæ™ºå•†å¹²é¢„ç»„ï¼ˆä¸Š å¤§å­¦ä¸ªä½“) å’Œæ§åˆ¶ç»„ (æ²¡ä¸Šå¤§å­¦ä¸ªä½“), æ— å¹²é¢„ç»„å’Œæ§åˆ¶ç»„éƒ½ å­˜åœ¨çš„è§‚æµ‹ç»“æœ, æ— æ³•ä¼°è®¡ã€‚
  
      - å…ˆè·å¾—è§£é‡Šå˜é‡çš„æ‰€æœ‰ç»„åˆ â†’  ç»™å®šä»»æ„æ™ºå•†æ°´å¹³ï¼Œæ²¡æœ‰åŒæ—¶åœ¨å¹²é¢„ç»„åˆæ§åˆ¶ç»„çš„æ•°æ® â†’ å¹²é¢„ç»„å’Œæ§åˆ¶ç»„ä¸ªä½“æ— æ³•åŒ¹é… â†’ æ— æ³•ä¼°è®¡å„æ™ºå•†æ°´å¹³çš„ATE
     
  - æ§åˆ¶å˜é‡é¥±å’Œæ¨¡å‹: å¯¹äºåªæœ‰å¹²é¢„ç»„æˆ–æ§åˆ¶ç»„çš„æ•°æ®, æƒé‡ä¸º 0 , æ— æ³•ä¼°è®¡å¤„ç½®æ•ˆåº” `\(\widehat{A T E}\)` 
      - é‡ç‚¹æ˜¯æƒé‡çš„ä¼°è®¡ â†’ å¯¹äºç»™å®šä»»æ„æ™ºå•†æ°´å¹³ï¼Œéå¹²é¢„å³æ§åˆ¶ â†’ `\(Var(D_i \mid IQ_i = q) = 0\)` â†’ æ— æ³•è®¡ç®—ATE

---
## `\(\widehat{A T E}\)` å·®å¼‚ï¼šä¾‹å­
      
- å”¯ä¸€çš„å‡ºè·¯å°±æ˜¯ä½¿ç”¨ï¼šéé¥±å’Œå›å½’æ¨¡å‹
 `$$I N C_{i}=\alpha+\beta_{1} \text { College } e_{i}+\beta_{2} {IQ}_{i}+e_{i}$$`

- å‡è®¾IQä¸INCæ˜¯çº¿æ€§å…³ç³»ï¼šIQæ¯å¢åŠ 1ï¼Œæ”¶å…¥å‡å€¼å¢åŠ  `\(\beta_{2}\)`

.center[

&lt;img src=https://pkuzzq-image.oss-cn-beijing.aliyuncs.com/uPic/Sl7xv6.png height="320"&gt;

]

---
## `\(\widehat{A T E}\)` å·®å¼‚ï¼šä¾‹å­

- ä¸¥é‡å–å†³äºæ¨¡å‹è®¾å®šã€‚å¦‚æœçœŸå®çš„åäº‹å®çš„ç»“æœå¦‚è™šçº¿(æ›²çº¿)æ‰€ç¤ºï¼Œè€Œéç®€å•çš„çº¿æ€§å…³ç³»ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œé€šè¿‡å‡è®¾çš„çº¿æ€§å‡½æ•°å¤–æ¨å¾—åˆ°çš„åäº‹å®ç»“æœå°±ä¸çœŸå®æƒ…å†µç›¸å»ç”šè¿œã€‚

  - åœ¨ç¼ºä¹é‡å æƒ…å†µä¸‹ï¼Œå›å½’å¾—åˆ°çš„å¤„ç½®æ•ˆåº”å–å†³äºæ¨¡å‹è®¾å®šæ­£ç¡®ä¸å¦

- ç»“æœä¸ç¨³å¥ã€‚å³ä½¿å…³ç³»å‡è®¾æ­£ç¡®ï¼Œåœ¨ç¼ºä¹é‡å å¹¶ä¸å‡è¡¡çš„æƒ…å†µä¸‹ï¼Œå¤„ç½®å˜é‡ç³»æ•° `\(\beta_1\)` çš„ä¼°è®¡å€¼ä¹Ÿå®¹æ˜“å—åˆ°æ§åˆ¶å˜é‡ `\(\beta_2\)` çš„å½±å“ã€‚
  
  - ç”¨ä¸€ç»„æ–°æ•°æ®INC2ï¼ˆå°å¹…åº¦æ”¹åŠ¨ï¼‰å†æ¬¡å›å½’
  
.center[
&lt;img src=https://pkuzzq-image.oss-cn-beijing.aliyuncs.com/uPic/Itz1dG.png height="220"&gt;
]

---
## `\(\widehat{A T E}\)` å·®å¼‚ï¼šä¾‹å­

- è‹¥å°†æ•°æ®æ”¹ä¸ºå…·å¤‡é‡å å’Œå‡è¡¡æƒ…å†µæ—¶ï¼Œç”¨INC1å’ŒINC2å†è¿›è¡Œä¸Šè¿°

    - åœ¨ä¸­ç­‰æ™ºå•†çš„äººï¼Œæœ‰äº›ä¸Šäº†å¤§å­¦ï¼Œæœ‰äº›æ²¡æœ‰ä¸Šå¤§å­¦ â†’ é‡å 
    
    - æ™ºå•†åœ¨ä¸Šå¤§å­¦å’Œæ²¡ä¸Šå¤§å­¦çš„ç»„åˆ«ä¸­å‡å€¼ç›¸ç­‰ â†’ å¹³è¡¡
    
- ç»“æœæ˜¾ç¤ºï¼š å¤„ç½®æ•ˆåº”åœ¨INC1å’ŒINC2çš„ä¼°è®¡ç»“æœæ¯”è¾ƒç¨³å¥ï¼›å°½ç®¡IQåœ¨ä¸¤ä¸ªæ ·æœ¬ä¸­ç³»æ•°å·®åˆ«è¾ƒå¤§ã€‚

---
## æ€»ç»“
### ç›¸åŒç‚¹

&lt;br&gt;

1.å›å½’æ–¹æ³•å’ŒåŒ¹é…æ–¹æ³•éƒ½æ˜¯ç”¨äºå¤„ç†åœ¨ä¼°è®¡å¤„ç½®æ•ˆåº”ä¸­ç”±äº.b[å¯è§‚æµ‹å˜é‡è‡ªé€‰æ‹©]é€ æˆçš„åå·®ï¼Œå®ƒä»¬éƒ½ä¸èƒ½å¤„ç†åœ¨ä¼°è®¡å¤„ç½®æ•ˆåº”ä¸­ç”±äº.b[ä¸å¯è§‚æµ‹å˜é‡è‡ªé€‰æ‹©]é€ æˆçš„åå·®ã€‚

&lt;br&gt;
2..b[ç²¾ç¡®åŒ¹é…]ä¸.b[å®Œå…¨é¥±å’Œå›å½’æ¨¡å‹]ä¼°è®¡çš„å¤„ç½®æ•ˆåº”æ˜¯ç›¸åŒçš„ã€‚

---
## æ€»ç»“
### ä¸åŒç‚¹

&lt;br&gt;

1.åŒ¹é…æ³•å’Œæ§åˆ¶å˜é‡é¥±å’Œå›å½’æ¨¡å‹åœ¨è®¡ç®—å¹³å‡å¤„ç½®æ•ˆåº”(éæ¡ä»¶çš„) `\(\widehat{A T E}\)` ä¸Šé‡‡ç”¨ä¸åŒçš„æƒé‡,å¯¹ `\(\widehat{A T E}\left(X_{i}={x}\right)\)` è¿›è¡ŒåŠ æƒå¹³å‡ã€‚

&lt;br&gt;
2.åŒ¹é…æ–¹æ³•æ˜¯å…ˆå°†æ ·æœ¬æ ¹æ®å¯è§‚æµ‹ç‰¹å¾ï¼ˆæ§åˆ¶å˜é‡ï¼‰è¿›è¡ŒåŒ¹é…ï¼Œåœ¨è§‚æµ‹ç‰¹å¾è¾¾åˆ°å‡è¡¡çš„åŸºç¡€ä¸Šæ±‚è§£å¤„ç½®æ•ˆåº”ã€‚.hi.b[åŒ¹é…æ–¹æ³•æ˜¯ä¸¤æ­¥ä¼°è®¡]ï¼Œå®ƒå…è®¸æˆ‘ä»¬å…ˆå¯¹å¯è§‚æµ‹ç‰¹å¾è¿›è¡Œå‡è¡¡æ€§æ£€éªŒã€‚.hi.b[å› æ­¤ï¼Œä½¿ç”¨åŒ¹é…æ–¹æ³•æ—¶åº”å¯¹æ•°æ®æ˜¯å¦æ»¡è¶³é‡å å’Œæ˜¯å¦å‡è¡¡æœ‰æ˜ç¡®çš„è®¤è¯†ã€‚]

---
## æ€»ç»“
### ä¸åŒç‚¹

&lt;br&gt;

3.éé¥±å’Œå›å½’æ¨¡å‹æ˜¯å°†æ§åˆ¶å˜é‡å’Œå¤„ç½®å˜é‡ä¸€èµ·çº³å…¥æ¨¡å‹ï¼Œ.hi.b[ä¸€æ­¥ä¼°è®¡]å‡ºå¤„ç½®æ•ˆåº”ï¼Œå¯¹æ˜¯å¦æœ‰é‡å æ¡ä»¶æ²¡æœ‰è¦æ±‚ã€‚.b[éé¥±å’Œå›å½’æ¨¡å‹]å¯ä»¥é€šè¿‡.hi[å‡è®¾æ§åˆ¶å˜é‡å’Œè§‚æµ‹ç»“æœçš„çº¿æ€§å…³ç³»]å»å¤–æ¨é‡å åŒºåŸŸå¤–çš„â€œåäº‹å®ç»“æœâ€ä»¥è¾¾åˆ°ä¼°è®¡å¤„ç½®æ•ˆåº”çš„ç›®çš„ï¼Œå…¶ç»“æœçš„åˆç†æ€§å–å†³äº.b[æ¨¡å‹å‡½æ•°å½¢å¼æ˜¯å¦æ­£ç¡®ã€‚]

&lt;br&gt;
4.åŒ¹é…æ–¹æ³•é€šè¿‡.b[åŒæ ·ç‰¹å¾]çš„å¹²é¢„ç»„å’Œæ§åˆ¶ç»„çš„è§‚æµ‹ç»“æœå‡å€¼ç›¸å‡å¾—åˆ°å¤„ç½®æ•ˆåº”ã€‚.b[å¯è§‚æµ‹ç‰¹å¾Xå¯¹ç»“æœYçš„å½±å“é€šè¿‡å‡å€¼ç›¸å‡æ¶ˆé™¤äº†ï¼Œå…¶ä¸éœ€è¦å‡è®¾ç‰¹å¾æ˜¯å¦‚ä½•å½±å“ç»“æœYçš„]ï¼Œå› æ­¤.hi[åŒ¹é…æ˜¯éå‚æ•°æ–¹æ³•]ã€‚å›å½’æ–¹æ³•åˆ™é€šè¿‡.b[çº¿æ€§å‡½æ•°LFPå…·ä½“å½¢å¼è®¾å®š]å‡è®¾ç‰¹å¾å˜é‡Xæ˜¯å¦‚ä½•å½±å“ç»“æœYçš„ï¼Œå› æ­¤.hi[å›å½’æ˜¯å‚æ•°ä¼°è®¡æ–¹æ³•]ã€‚
---
exclude: true


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9.85"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
